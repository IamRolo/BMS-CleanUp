(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(11),i=a.n(s),l=(a(62),a(1)),o=a(2),c=a(3),u=a(6),m=a(5),h=a(4),p=(a(63),a(8)),d=(a(64),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={active:r.props.active||!1},r}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:this.props.id,className:"row collapse"+("true"==this.state.active?" show":""),"data-parent":this.props.dataParent},n.a.createElement("div",{className:"col-lg-12 mt-1"},this.props.children)))}}]),a}(n.a.Component)),f=(a(26),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={active:r.props.active||!1},r}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("a",{ref:this.props.buttonRef,className:"btn btn-large ml-3 white-text-button"+(this.state.active," btn-primary")+(!0===this.props.disabled?" disabled":""),href:this.props.controls,"aria-controls":this.props.controls,role:"button","data-toggle":"collapse","aria-expanded":this.state.active},n.a.createElement("i",{className:this.props.icon})," ",this.props.text))}}]),a}(n.a.Component)),b=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.width+" mx-auto",onClick:this.props.onClick},n.a.createElement("div",{className:"box shadow mt-3"+("light"===this.props.theme?" light-background":"")},this.props.children)))}}]),a}(n.a.Component),g=(a(65),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).battery=n.a.createRef(),r.liquid=n.a.createRef(),r.liquidSvgAnimation=n.a.createRef(),r.batteryText=n.a.createRef(),r.batteryTextPercentage=n.a.createRef(),r.batteryTextUnits=n.a.createRef(),r.updateBattery=r.updateBattery.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"updateBattery",value:function(e){var t=Math.trunc(100*e);t<20?(this.liquidSvgAnimation.current.style.fill="red",this.battery.current.style.backgroundImage="linear-gradient(red 50%, #444 0%)"):t<50?(this.liquidSvgAnimation.current.style.fill="yellow",this.battery.current.style.backgroundImage="linear-gradient(yellow 50%, #444 0%)"):t<75?(this.liquidSvgAnimation.current.style.fill="chartreuse",this.battery.current.style.backgroundImage="linear-gradient(chartreuse 50%, #444 0%)"):(this.liquidSvgAnimation.current.style.fill="green",this.battery.current.style.backgroundImage="linear-gradient(green 50%, #444 0%)"),this.battery.current.style.backgroundPosition="0 -"+(100-t)+"%",this.batteryText.current.style.backgroundPosition="0 -"+(100-t)+"%",this.liquid.current.style.top=100-t+"%",this.liquid.current.style.backgroundColor=100===t?"green":"#444",this.batteryTextPercentage.current.innerText=(100*e).toFixed(1)}},{key:"componentDidUpdate",value:function(){this.props.soc&&this.updateBattery(this.props.soc)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:this.props.id||"",style:Object(l.a)({position:"absolute"},this.props.positionStyle)},n.a.createElement("div",{ref:this.battery,className:"battery onscreen",style:Object(l.a)({},this.props.sizeStyle)},n.a.createElement("div",{ref:this.liquid,className:"liquid liquid-bg-color"},n.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"300px",height:"5px",viewBox:"0 0 300 5",enableBackground:"new 0 0 300 5"},n.a.createElement("path",{ref:this.liquidSvgAnimation,className:"wave",d:"M300,300V2.5c0,0-0.6-0.1-1.1-0.1c0,0-25.5-2.3-40.5-2.4c-15,0-40.6,2.4-40.6,2.4\r c-12.3,1.1-30.3,1.8-31.9,1.9c-2-0.1-19.7-0.8-32-1.9c0,0-25.8-2.3-40.8-2.4c-15,0-40.8,2.4-40.8,2.4c-12.3,1.1-30.4,1.8-32,1.9\r c-2-0.1-20-0.8-32.2-1.9c0,0-3.1-0.3-8.1-0.7V300H300z"})))),n.a.createElement("div",{ref:this.batteryText,className:"battery-text onscreen"},this.props.isCharging&&n.a.createElement("span",{className:"isChargingIndicator"},n.a.createElement("i",{className:"fa fa-bolt"})),n.a.createElement("span",{ref:this.batteryTextPercentage,className:"percentage"}),n.a.createElement("small",{ref:this.batteryTextUnits,className:"units"},"%"))))}}]),a}(n.a.Component)),v=a(54),C=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={},r.data={labels:[],datasets:[{data:[],borderColor:"#008FFB",pointRadius:0,fill:!1,borderWidth:4}]},r.options={animation:{duration:1500,easing:"linear"},tooltips:{enabled:!1},legend:{display:!1},scales:{xAxes:[{gridLines:{color:"#90A4AE"},ticks:{fontColor:"white",beginAtZero:!0}}],yAxes:[{gridLines:{color:"#90A4AE",zeroLineColor:"#90A4AE"},ticks:{fontColor:"white"}}]},maintainAspectRatio:!1},r.chartReference=n.a.createRef(),r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e,t,a,r,n,s=null===(e=this.props.data.labels)||void 0===e?void 0:e.length;(s>=12&&(this.chartReference.current.chartInstance.options.scales.xAxes[0].ticks.min=this.props.data.labels[s-1]-9,this.chartReference.current.chartInstance.options.scales.xAxes[0].ticks.max=this.props.data.labels[s-1]-1),this.chartReference.current.chartInstance.data.labels=this.props.data.labels,this.chartReference.current.chartInstance.data.datasets[0].data=this.props.data.values,!0===(null===(t=this.props.graphSettings)||void 0===t?void 0:t.graphAutoscaling))?(this.chartReference.current.chartInstance.options.scales.yAxes[0].ticks.min=void 0,this.chartReference.current.chartInstance.options.scales.yAxes[0].ticks.max=void 0):(this.chartReference.current.chartInstance.options.scales.yAxes[0].ticks.min=null===(r=this.props.setScales)||void 0===r?void 0:r.yAxes.min,this.chartReference.current.chartInstance.options.scales.yAxes[0].ticks.max=null===(n=this.props.setScales)||void 0===n?void 0:n.yAxes.max);!1===(null===(a=this.props.graphSettings)||void 0===a?void 0:a.graphAnimations)?this.chartReference.current.chartInstance.update(0):this.chartReference.current.chartInstance.update()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.a,{ref:this.chartReference,data:this.data,options:Object(l.a)(Object(l.a)({},this.options),this.props.options)}))}}]),a}(n.a.Component),y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-lg-6 text-right",style:{paddingRight:"0px",paddingLeft:"0px"}},n.a.createElement("span",{className:"custom-font mr-2 custom-light-weight"+("light"===this.props.theme?" text-dark":" text-white")},this.props.label," ")),n.a.createElement("div",{className:"col-lg-5 text-left align-self-center",style:{paddingRight:"0px",paddingLeft:"10px"}},n.a.createElement("span",{className:"custom-font"+("light"===this.props.theme?" text-dark":" text-white")},this.props.value),n.a.createElement("span",{className:"custom-font"+("light"===this.props.theme?" text-dark":" text-white")},this.props.units)))}}]),a}(n.a.Component),S=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={},r}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this.props.data.packSoC.length>0?this.props.data.packSoC[this.props.data.packSoC.length-1]:void 0,a=this.props.data.packVoltage.length>0?this.props.data.packVoltage[this.props.data.packVoltage.length-1].toFixed(2):"0",r=this.props.data.packCurrent.length>0?this.props.data.packCurrent[this.props.data.packCurrent.length-1].toFixed(2):"0",s=this.props.data.packTemperature.length>0?this.props.data.packTemperature[this.props.data.packTemperature.length-1].toFixed(2):"0",i=(a*r).toFixed(2);e=this.props.boardConnected?0===r?"Idle":r>0?"Charging":"Discharging":"Disconected";var l={xAxes:[{gridLines:{color:"#90A4AE"},ticks:{beginAtZero:!0,fontColor:"light"===this.props.theme?"black":"white"}}],yAxes:[{ticks:{fontColor:"light"===this.props.theme?"black":"white"},gridLines:{color:"#90A4AE",zeroLineColor:"#90A4AE"}}]};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement(b,{width:"col-md-4",onClick:this.props.clickCellsPackTab,theme:this.props.theme},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 text-center"},n.a.createElement("p",{className:"custom-font"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"0px"}},"Summary"))),n.a.createElement("div",{className:"row",style:{marginTop:"15px",marginBottom:"27px"}},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(g,{id:"dashboardBattery",positionStyle:{top:"190px",left:"60px"},sizeStyle:{width:"95px",height:"195px"},isCharging:r>0,soc:t})),n.a.createElement("div",{className:"col-md-7 offset-md-1"},n.a.createElement("div",{className:"row mt-4"},n.a.createElement(y,{label:"State of charge (SoC)",value:(100*t).toFixed(2)||0,units:this.props.units.systemSocUnits,theme:this.props.theme})),n.a.createElement("div",{className:"row mt-2"},n.a.createElement(y,{label:"Voltage",value:a,units:this.props.units.systemVoltageUnits,theme:this.props.theme})),n.a.createElement("div",{className:"row mt-2"},n.a.createElement(y,{label:"Current",value:r,units:this.props.units.systemCurrentUnits,theme:this.props.theme})),n.a.createElement("div",{className:"row mt-2"},n.a.createElement(y,{label:"Temperature",value:s,units:this.props.units.systemTempUnits,theme:this.props.theme})),n.a.createElement("div",{className:"row mt-2"},n.a.createElement(y,{label:"Power",value:i,units:this.props.units.systemPowerUnits,theme:this.props.theme})),n.a.createElement("div",{className:"row mt-2"},n.a.createElement(y,{label:"Status",value:e,units:"",theme:this.props.theme}))))),n.a.createElement(b,{width:"col-md-8",theme:this.props.theme},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6",style:{minHeight:"295px"}},n.a.createElement(C,{data:{labels:this.props.data.labels,values:this.props.data.packVoltage},options:{title:{display:!0,text:"BMS Voltage "+"(".concat(this.props.units.systemVoltageUnits,")"),fontColor:"light"===this.props.theme?"black":"white",fontSize:14,padding:5},scales:l},setScales:{yAxes:{min:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].min*this.props.cellsNumber,max:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].max*this.props.cellsNumber}},graphSettings:this.props.graphSettings})),n.a.createElement("div",{className:"col-md-6",style:{minHeight:"295px"}},n.a.createElement(C,{data:{labels:this.props.data.labels,values:this.props.data.packCurrent},options:{title:{display:!0,text:"BMS Current "+"(".concat(this.props.units.systemCurrentUnits,")"),fontColor:"light"===this.props.theme?"black":"white",fontSize:14,padding:5},scales:l},setScales:{yAxes:{min:this.props.units.axis.current[this.props.units.systemCurrentUnits].min*this.props.cellsNumber,max:this.props.units.axis.current[this.props.units.systemCurrentUnits].max*this.props.cellsNumber}},graphSettings:this.props.graphSettings}))))))}}]),a}(n.a.Component),k=a(13),E=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.width+" mx-auto"},n.a.createElement("div",{className:"box shadow mt-3"+("light"===this.props.theme?" light-background":""),style:{paddingLeft:"0px",paddingRight:"10px",paddingBottom:"0px",paddingTop:"10px"}},this.props.children)))}}]),a}(n.a.Component),x=a(25),O=a.n(x),N=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).dropdownContextMenu=n.a.createRef(),r.voltageOption=n.a.createRef(),r.curentOption=n.a.createRef(),r.tempOption=n.a.createRef(),r.selectedOption=n.a.createRef(),r.voltageChartContainer=n.a.createRef(),r.currentChartContainer=n.a.createRef(),r.temperatureChartContainer=n.a.createRef(),r.state={visible:!1,selectedToShow:"Voltage",units:r.props.units.systemVoltageUnits},r.chartReference=n.a.createRef(),r.contextMenuOpen=r.contextMenuOpen.bind(Object(u.a)(r)),r.menuOptionChange=r.menuOptionChange.bind(Object(u.a)(r)),r.adjustToSystemUnits=r.adjustToSystemUnits.bind(Object(u.a)(r)),r.visibilityChange=r.visibilityChange.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("click",(function(){e.dropdownContextMenu.current&&(e.dropdownContextMenu.current.classList.remove("show"),e.dropdownContextMenu.current.style.display="none")})),document.body.addEventListener("contextmenu",(function(){e.dropdownContextMenu.current&&(e.dropdownContextMenu.current.classList.remove("show"),e.dropdownContextMenu.current.style.display="none")}))}},{key:"contextMenuOpen",value:function(e){var t=e.clientY,a=e.clientX;this.dropdownContextMenu.current.style.top=t+"px",this.dropdownContextMenu.current.style.left=a+"px",this.dropdownContextMenu.current.style.display="block",this.dropdownContextMenu.current.classList.add("show"),e.preventDefault()}},{key:"menuOptionChange",value:function(e){switch(this.voltageOption.current.classList.remove("active"),this.curentOption.current.classList.remove("active"),this.tempOption.current.classList.remove("active"),e.target.classList.add("active"),e.target.innerText){case"Voltage":this.voltageChartContainer.current.style.display="block",this.currentChartContainer.current.style.display="none",this.temperatureChartContainer.current.style.display="none",this.setState((function(){return{selectedToShow:"Voltage"}}));break;case"Current":this.voltageChartContainer.current.style.display="none",this.currentChartContainer.current.style.display="block",this.temperatureChartContainer.current.style.display="none",this.setState((function(){return{selectedToShow:"Current"}}));break;case"Temp":this.voltageChartContainer.current.style.display="none",this.currentChartContainer.current.style.display="none",this.temperatureChartContainer.current.style.display="block",this.setState((function(){return{selectedToShow:"Temp"}}))}}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.theme!==e.theme||this.props.cellsNumber<=6||this.state.visible}},{key:"adjustToSystemUnits",value:function(){switch(this.state.selectedToShow){case"Voltage":this.state.units=this.props.units.systemVoltageUnits;break;case"Current":this.state.units=this.props.units.systemCurrentUnits;break;case"Temp":this.state.units=this.props.units.systemTempUnits}}},{key:"visibilityChange",value:function(e){this.setState((function(){return{visible:e}}))}},{key:"render",value:function(){var e,t,a,r,s,i,o,c,u,m,h,p,d,f,b,v,y={scales:{xAxes:[{gridLines:{color:"#90A4AE"},ticks:{beginAtZero:!0,fontColor:"light"===this.props.theme?"black":"white"}}],yAxes:[{ticks:{fontColor:"light"===this.props.theme?"black":"white"},gridLines:{color:"#90A4AE",zeroLineColor:"#90A4AE"}}]}};return this.adjustToSystemUnits(),n.a.createElement(O.a,{onChange:this.visibilityChange},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{onContextMenu:this.contextMenuOpen,className:"row","data-toggle":"modal","data-target":"#bateryModal"+this.props.id},n.a.createElement("div",{className:"col-md-12 text-center"},n.a.createElement("p",{className:"custom-font"+("light"===this.props.theme?" text-dark":" text-white")},"Cell ",this.props.id+1," ",n.a.createElement("span",{ref:this.selectedOption},this.state.selectedToShow," ("),n.a.createElement("span",null,this.state.units,")")))),n.a.createElement("div",{onContextMenu:this.contextMenuOpen,className:"row","data-toggle":"modal","data-target":"#bateryModal"+this.props.id},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(g,{positionStyle:{top:"190px",left:"75px"},isCharging:(null===(e=this.props.cellData)||void 0===e?void 0:e.current[(null===(t=this.props.cellData)||void 0===t?void 0:t.current.length)-1])>0,soc:null===(a=this.props.cellData)||void 0===a?void 0:a.soc[(null===(r=this.props.cellData)||void 0===r?void 0:r.soc.length)-1]})),n.a.createElement("div",{className:"col-md-9 text-center"},n.a.createElement("div",{ref:this.voltageChartContainer,style:{minHeight:"230px"}},n.a.createElement(C,{data:{labels:null===(s=this.props.cellData)||void 0===s?void 0:s.labels,values:null===(i=this.props.cellData)||void 0===i?void 0:i.voltage},options:y,setScales:{yAxes:{min:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].min,max:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].max}},graphSettings:this.props.graphSettings})),n.a.createElement("div",{ref:this.currentChartContainer,style:{display:"none",minHeight:"230px"}},n.a.createElement(C,{data:{labels:null===(o=this.props.cellData)||void 0===o?void 0:o.labels,values:null===(c=this.props.cellData)||void 0===c?void 0:c.current},options:y,setScales:{yAxes:{min:this.props.units.axis.current[this.props.units.systemCurrentUnits].min,max:this.props.units.axis.current[this.props.units.systemCurrentUnits].max}},graphSettings:this.props.graphSettings})),n.a.createElement("div",{ref:this.temperatureChartContainer,style:{display:"none",minHeight:"230px"}},n.a.createElement(C,{data:{labels:null===(u=this.props.cellData)||void 0===u?void 0:u.labels,values:null===(m=this.props.cellData)||void 0===m?void 0:m.temp},options:y,setScales:{yAxes:{min:this.props.units.axis.temp[this.props.units.systemTempUnits].min,max:this.props.units.axis.temp[this.props.units.systemTempUnits].max}},graphSettings:this.props.graphSettings})))),n.a.createElement("div",{ref:this.dropdownContextMenu,className:"dropdown-menu dropdown-menu-sm custom-context-menu"},n.a.createElement("a",{className:"dropdown-item active",ref:this.voltageOption,onClick:this.menuOptionChange},"Voltage"),n.a.createElement("a",{className:"dropdown-item",ref:this.curentOption,onClick:this.menuOptionChange},"Current"),n.a.createElement("a",{className:"dropdown-item",ref:this.tempOption,onClick:this.menuOptionChange},"Temp")),n.a.createElement("div",{className:"modal fade",id:"bateryModal"+this.props.id,tabIndex:"-1",role:"dialog","aria-labelledby":"bateryModalLabel"+this.props.id,"aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog",role:"document",style:{maxWidth:"1100px"}},n.a.createElement("div",{className:"modal-content"+("light"===this.props.theme?" light-background":"")},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title"+("light"===this.props.theme?" text-dark":" text-white"),id:"bateryModalLabel"+this.props.id},"Cell ",this.props.id+1," details"),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"})),n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-4",style:{minHeight:"400px"}},n.a.createElement(C,{data:{labels:null===(h=this.props.cellData)||void 0===h?void 0:h.labels,values:null===(p=this.props.cellData)||void 0===p?void 0:p.voltage},options:Object(l.a)(Object(l.a)({},y),{},{title:{display:!0,text:"Cell Voltage "+"(".concat(this.props.units.systemVoltageUnits,")"),fontColor:"light"===this.props.theme?"black":"white",fontSize:"14"}}),setScales:{yAxes:{min:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].min,max:this.props.units.axis.voltage[this.props.units.systemVoltageUnits].max}},graphSettings:this.props.graphSettings})),n.a.createElement("div",{className:"col-lg-4",style:{minHeight:"400px"}},n.a.createElement(C,{data:{labels:null===(d=this.props.cellData)||void 0===d?void 0:d.labels,values:null===(f=this.props.cellData)||void 0===f?void 0:f.current},options:Object(l.a)(Object(l.a)({},y),{},{title:{display:!0,text:"Cell Current "+"(".concat(this.props.units.systemCurrentUnits,")"),fontColor:"light"===this.props.theme?"black":"white",fontSize:"14"}}),setScales:{yAxes:{min:this.props.units.axis.current[this.props.units.systemCurrentUnits].min,max:this.props.units.axis.current[this.props.units.systemCurrentUnits].max}},graphSettings:this.props.graphSettings})),n.a.createElement("div",{className:"col-lg-4",style:{minHeight:"400px"}},n.a.createElement(C,{data:{labels:null===(b=this.props.cellData)||void 0===b?void 0:b.labels,values:null===(v=this.props.cellData)||void 0===v?void 0:v.temp},options:Object(l.a)(Object(l.a)({},y),{},{title:{display:!0,text:"Cell Temperature "+"(".concat(this.props.units.systemTempUnits,")"),fontColor:"light"===this.props.theme?"black":"white",fontSize:"14"}}),setScales:{yAxes:{min:this.props.units.axis.temp[this.props.units.systemTempUnits].min,max:this.props.units.axis.temp[this.props.units.systemTempUnits].max}},graphSettings:this.props.graphSettings})))))))))}}]),a}(n.a.Component),V=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},Object(k.a)(Array(this.props.cellsNumber).keys()).map((function(t){return n.a.createElement(E,{key:t,width:"col-md-4",theme:e.props.theme},n.a.createElement(N,{id:t,cellsNumber:e.props.cellsNumber,cellData:e.props.cellsData[t],units:e.props.units,theme:e.props.theme,boardConnected:e.props.boardConnected,demoModeActive:e.props.demoModeActive,graphSettings:e.props.graphSettings}))}))))}}]),a}(n.a.Component),P=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("td",{scope:"row"},"Cell ",this.props.id+1),this.props.values&&this.props.values.length>0?n.a.createElement("td",null,this.props.values[this.props.values.length-1].toFixed(2)):"0",n.a.createElement("td",null,this.props.units)))}}]),a}(n.a.Component),D=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"table table-striped table-sm text-center"+("light"===this.props.theme?"":" table-dark")},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Value"),n.a.createElement("th",{scope:"col"},"Units"))),n.a.createElement("tbody",null,Object(k.a)(Array(this.props.cellsNumber).keys()).map((function(t){return n.a.createElement(P,{id:t,key:t,name:e.props.name,values:e.props.cellsData[t],units:e.props.units})})))))}}]),a}(n.a.Component),R=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={visible:!1},r.visibilityChange=r.visibilityChange.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.theme!==e.theme||this.state.visible}},{key:"visibilityChange",value:function(e){this.setState((function(){return{visible:e}}))}},{key:"render",value:function(){return n.a.createElement(O.a,{onChange:this.visibilityChange,partialVisibility:!0},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement(b,{width:"col-md-4",theme:this.props.theme},n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"badge badge-primary ml-2 mb-2",style:{fontSize:"22px"}},n.a.createElement("i",{className:"fa fa-bolt mr-2"}),"Voltage")),n.a.createElement("div",{className:"row"},n.a.createElement(D,{cellsNumber:this.props.cellsNumber,cellsData:this.props.cellsData.map((function(e){return e.voltage})),name:"Voltage",units:this.props.units.systemVoltageUnits,theme:this.props.theme}))),n.a.createElement(b,{width:"col-md-4",theme:this.props.theme},n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"badge badge-primary ml-2 mb-2",style:{fontSize:"22px"}},n.a.createElement("span",{style:{fontSize:"52px",fontWeight:"400",lineHeight:"0.0",position:"absolute",top:"55px"}},"\u2393"),n.a.createElement("span",{style:{minWidth:"100px"}},"\xa0\xa0\xa0\xa0\xa0"),n.a.createElement("span",{className:"ml-2"},"Current"))),n.a.createElement("div",{className:"row"},n.a.createElement(D,{cellsNumber:this.props.cellsNumber,cellsData:this.props.cellsData.map((function(e){return e.current})),name:"Current",units:this.props.units.systemCurrentUnits,theme:this.props.theme}))),n.a.createElement(b,{width:"col-md-4",theme:this.props.theme},n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"badge badge-primary ml-2 mb-2",style:{fontSize:"22px"}},n.a.createElement("i",{className:"fa fa-thermometer-half mr-2"}),"Temperature")),n.a.createElement("div",{className:"row"},n.a.createElement(D,{cellsNumber:this.props.cellsNumber,cellsData:this.props.cellsData.map((function(e){return e.temp})),name:"Temperature",units:this.props.units.systemTempUnits,theme:this.props.theme}))))))}}]),a}(n.a.Component),w=a(56),A=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={freemasterVersion:"desktop"},r.liteServerUrlInput=n.a.createRef(),r.connStringInput=n.a.createRef(),r.elfPathInput=n.a.createRef(),r.onInputChange=r.onInputChange.bind(Object(u.a)(r)),r.onelfPathInputChange=r.onelfPathInputChange.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.liteServerUrlInput.current.defaultValue=this.props.liteConnection.liteServerUrl,this.connStringInput.current.defaultValue=this.props.liteConnection.connString,this.elfPathInput.current.defaultValue=this.props.elfPath}},{key:"componentDidUpdate",value:function(){"desktop"===this.state.freemasterVersion&&(this.liteServerUrlInput.current.defaultValue="localhost:41000",this.connStringInput.current.defaultValue="Managed from Desktop Application",this.elfPathInput.current.defaultValue="Managed from Desktop Application"),"lite"===this.state.freemasterVersion&&(this.liteServerUrlInput.current.defaultValue="localhost:8090",this.connStringInput.current.defaultValue="RS232;port=COM3;speed=115200;",this.elfPathInput.current.defaultValue="bms\\bms_s32k_mc33772b_spi.elf")}},{key:"onInputChange",value:function(){this.props.changeLiteConnection({liteServerUrl:this.liteServerUrlInput.current.value,connString:this.connStringInput.current.value})}},{key:"onelfPathInputChange",value:function(){this.props.changeElfPath(this.elfPathInput.current.value)}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",null,n.a.createElement("label",null,"Freemaster Version"),n.a.createElement("div",{className:"form-row mb-2"},n.a.createElement("div",{className:"col text-center mx-auto"},n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"freemasterVersion",id:"desktopRadio",value:"desktop",defaultChecked:!0,onClick:function(){e.setState({freemasterVersion:"desktop"}),e.props.onSelectedFreemasterVersion("desktop")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"desktopRadio"},"Desktop")),n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"freemasterVersion",id:"liteRadio",value:"lite",onClick:function(){e.setState({freemasterVersion:"lite"}),e.props.onSelectedFreemasterVersion("lite"),e.props.changeLiteConnection({liteServerUrl:"localhost:8090",connString:"RS232;port=COM3;speed=115200;"}),e.props.changeElfPath("bms\\bms_s32k_mc33772b_spi.elf")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"liteRadio"},"Lite")))),n.a.createElement("label",null,"Freemaster Server URL"),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"input-group mb-1"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"server-addon"},n.a.createElement("i",{className:"fa fa-server"}))),n.a.createElement("input",{ref:this.liteServerUrlInput,type:"text",disabled:"desktop"===this.state.freemasterVersion,onChange:this.onInputChange,className:"form-control",placeholder:"Freemaster Server URL (ex:localhost:8090)","aria-label":"Server","aria-describedby":"server-addon"}))),n.a.createElement("label",null,"Connection String"),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"input-group mb-1"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"connstring-addon"},n.a.createElement("i",{className:"fa fa-plug"}))),n.a.createElement("input",{ref:this.connStringInput,type:"text",disabled:"desktop"===this.state.freemasterVersion,onChange:this.onInputChange,className:"form-control",placeholder:"Connection String (ex:RS232;port=COM3;speed=115200;)","aria-label":"ConnectionString","aria-describedby":"connstring-addon"}))),n.a.createElement("label",null,"ELF File"),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"elfpath-addon"},n.a.createElement("i",{className:"fa fa-file"}))),n.a.createElement("input",{ref:this.elfPathInput,type:"text",disabled:"desktop"===this.state.freemasterVersion,onChange:this.onelfPathInputChange,className:"form-control",placeholder:"ex: bms_s32k.elf","aria-label":"ElfPath","aria-describedby":"elfpath-addon"})))))}}]),a}(n.a.Component),j=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",null,n.a.createElement("label",null,"Recorded Parameters"),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"col text-center mx-auto"},n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"recordedParams",id:"voltageCheckbox",value:"voltage",defaultChecked:!0,onClick:function(){return e.props.onSelectedRecordParamsToggle("voltage")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"voltageCheckbox"},"Voltage")),n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"recordedParams",id:"currentCheckbox",value:"current",defaultChecked:!0,onClick:function(){return e.props.onSelectedRecordParamsToggle("current")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"currentCheckbox"},"Current")),n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"recordedParams",id:"temperatureCheckbox",value:"temperature",defaultChecked:!0,onClick:function(){return e.props.onSelectedRecordParamsToggle("temperature")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"temperatureCheckbox"},"Temperature")),n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"recordedParams",id:"socCheckbox",value:"soc",defaultChecked:!0,onClick:function(){return e.props.onSelectedRecordParamsToggle("soc")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"socCheckbox"},"SoC"))))))}}]),a}(n.a.Component),T=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"col text-center mx-auto"},n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"chartParams",id:"autoScalingCheckbox",value:"autoScaling",defaultChecked:!0,onClick:function(){return e.props.onToggleAutoScaling()}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"autoScalingCheckbox"},"Auto scaling axes")),n.a.createElement("div",{className:"form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"chartParams",id:"animationsCheckbox",value:"animations",defaultChecked:!0,onClick:function(){return e.props.onToggleAnimations()}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"animationsCheckbox"},"Animations")))))}}]),a}(n.a.Component),U=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={cellsNr:6,selectedRecordParam:{voltage:!0,current:!0,temperature:!0,soc:!0},recordedData:[["voltage","current","temperature","soc"]]},r.cellsNumberSelect=n.a.createRef(),r.onChangeCellsNumber=r.onChangeCellsNumber.bind(Object(u.a)(r)),r.onChangeUnits=r.onChangeUnits.bind(Object(u.a)(r)),r.formatRecordedData=r.formatRecordedData.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"onChangeUnits",value:function(e){this.props.changeUnit(e.target.value)}},{key:"onChangeCellsNumber",value:function(e){Number(this.cellsNumberSelect.current.value)&&Number(this.cellsNumberSelect.current.value)!=this.state.cellsNr&&(this.state.cellsNr=Number(this.cellsNumberSelect.current.value),this.props.changeCellsNumber(Number(this.cellsNumberSelect.current.value))),e.preventDefault()}},{key:"formatRecordedData",value:function(){var e,t=[[]];t[0].push("Time"),this.state.selectedRecordParam.voltage&&t[0].push("BMS voltage ("+this.props.units.systemVoltageUnits+")"),this.state.selectedRecordParam.current&&t[0].push("BMS current ("+this.props.units.systemCurrentUnits+")"),this.state.selectedRecordParam.temperature&&t[0].push("BMS temperature ("+this.props.units.systemTempUnits+")"),this.state.selectedRecordParam.soc&&t[0].push("BMS SoC ("+this.props.units.systemSocUnits+")");for(var a=1;a<=this.props.cellsNumber;a++)this.state.selectedRecordParam.voltage&&t[0].push("Cell "+a+" voltage ("+this.props.units.systemVoltageUnits+")"),this.state.selectedRecordParam.current&&t[0].push("Cell "+a+" current ("+this.props.units.systemCurrentUnits+")"),this.state.selectedRecordParam.temperature&&t[0].push("Cell "+a+" temperature ("+this.props.units.systemTempUnits+")"),this.state.selectedRecordParam.soc&&t[0].push("Cell "+a+" SoC ("+this.props.units.systemSocUnits+")");for(var r=this.props.cellsData,n=(null===(e=r[0])||void 0===e?void 0:e.labels.length)||0,s=0;s<n;s++){t.push([]),t[s+1].push(r[0].labels[s]),this.state.selectedRecordParam.voltage&&t[s+1].push(this.props.data.packVoltage[s]),this.state.selectedRecordParam.current&&t[s+1].push(this.props.data.packCurrent[s]),this.state.selectedRecordParam.temperature&&t[s+1].push(this.props.data.packTemperature[s]),this.state.selectedRecordParam.soc&&t[s+1].push(this.props.data.packSoC[s]);for(var i=0;i<this.props.cellsNumber;i++)this.state.selectedRecordParam.voltage&&t[s+1].push(r[i].voltage[s]),this.state.selectedRecordParam.current&&t[s+1].push(r[i].current[s]),this.state.selectedRecordParam.temperature&&t[s+1].push(r[i].temp[s]),this.state.selectedRecordParam.soc&&t[s+1].push(r[i].soc[s])}this.setState((function(){return{recordedData:t}})),p.b.info(" Data exported.",{autoClose:3e3})}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"row"},n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"BMS Parameters"),n.a.createElement("form",null,n.a.createElement("label",null,"Filter used to determine SOC"),n.a.createElement("div",{className:"form-row"},n.a.createElement("select",{className:"form-control mx-auto"},n.a.createElement("option",{defaultValue:!0},"Select the filter used to determine SOC"),n.a.createElement("option",{value:"1"},"Coloumb Counting"),n.a.createElement("option",{value:"2"},"UKF"),n.a.createElement("option",{value:"3"},"EKF"))),n.a.createElement("label",{className:"mt-3"},"Number of Cells"),n.a.createElement("div",{className:"form-row"},n.a.createElement("select",{ref:this.cellsNumberSelect,onClick:this.onChangeCellsNumber,className:"form-control mx-auto"},n.a.createElement("option",{defaultValue:!0,value:"0"},"Select the number of cells"),Object(k.a)(Array(16).keys()).map((function(e){return n.a.createElement("option",{value:e+1,key:e},e+1)})))))),n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"Data recording options"),n.a.createElement(j,{onSelectedRecordParamsToggle:function(t){switch(t){case"voltage":e.setState((function(e){return{selectedRecordParam:Object(l.a)(Object(l.a)({},e.selectedRecordParam),{},{voltage:!e.selectedRecordParam.voltage})}}));break;case"current":e.setState((function(e){return{selectedRecordParam:Object(l.a)(Object(l.a)({},e.selectedRecordParam),{},{current:!e.selectedRecordParam.current})}}));break;case"temperature":e.setState((function(e){return{selectedRecordParam:Object(l.a)(Object(l.a)({},e.selectedRecordParam),{},{temperature:!e.selectedRecordParam.temperature})}}));break;case"soc":e.setState((function(e){return{selectedRecordParam:Object(l.a)(Object(l.a)({},e.selectedRecordParam),{},{soc:!e.selectedRecordParam.soc})}}))}}}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col text-center"},n.a.createElement(w.CSVLink,{data:this.state.recordedData,filename:"BMS_recorded_parameters.csv",onClick:this.formatRecordedData,className:"btn btn-primary mt-4"},"Get recorded data")))))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"row"},n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"BMS Measurement Units"),n.a.createElement("label",null,"Voltage Units of Measure"),n.a.createElement("div",{className:"form-row"},n.a.createElement("select",{onClick:this.onChangeUnits,className:"form-control mx-auto"},n.a.createElement("option",{defaultValue:!0},"Select the Voltage Units of Measure"),n.a.createElement("option",{value:"uV"},"\xb5V"),n.a.createElement("option",{value:"mV"},"mV"),n.a.createElement("option",{value:"V"},"V"))),n.a.createElement("label",{className:"mt-3"},"Current Units of Measure"),n.a.createElement("div",{className:"form-row"},n.a.createElement("select",{onClick:this.onChangeUnits,className:"form-control mx-auto"},n.a.createElement("option",{defaultValue:!0},"Select the Current Units of Measure"),n.a.createElement("option",{value:"uA"},"\xb5A"),n.a.createElement("option",{value:"mA"},"mA"),n.a.createElement("option",{value:"A"},"A"))),n.a.createElement("label",{className:"mt-3"},"Temperature Units of Measure"),n.a.createElement("div",{className:"form-row"},n.a.createElement("select",{onClick:this.onChangeUnits,className:"form-control mx-auto"},n.a.createElement("option",{defaultValue:!0},"Select the Temperature Units of Measure"),n.a.createElement("option",{value:"C"},"\xb0C"),n.a.createElement("option",{value:"F"},"\xb0F"),n.a.createElement("option",{value:"K"},"K")))),n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"Application Settings"),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"col text-center mx-auto mt-3"},n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{onClick:this.props.triggerDemoMode,disabled:this.props.boardConnected,id:"demoModeCheckbox",className:"form-check-input",type:"checkbox"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"demoModeCheckbox"},"Demo Mode ",this.props.demoModeActive?" (active)":" (disabled)")))),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"col text-center mx-auto mt-4"},n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"themeRadios",id:"darkThemeRadio",value:"darkTheme",defaultChecked:!0,onClick:function(){document.body.style.background="#343E59",e.props.changeApplicationTheme("dark")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"darkThemeRadio"},"Dark Theme")),n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"themeRadios",id:"lightThemeRadio",value:"lightTheme",onClick:function(){document.body.style.background="#e7eff6",e.props.changeApplicationTheme("light")}}),n.a.createElement("label",{className:"form-check-label",htmlFor:"lightThemeRadio"},"Light Theme"))))))),n.a.createElement("div",{className:"col-lg-4"},n.a.createElement("div",{className:"row"},n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"Connection Parameters"),n.a.createElement(A,{pcm:this.state.pcm,boardConnected:this.props.boardConnected,demoModeActive:this.props.demoModeActive,loading:this.props.loading,liteConnection:this.props.liteConnection,elfPath:this.props.elfPath,onSelectedFreemasterVersion:this.props.onSelectedFreemasterVersion,changeElfPath:this.props.changeElfPath,changeLiteConnection:this.props.changeLiteConnection})),n.a.createElement(b,{width:"col-md-12",theme:this.props.theme},n.a.createElement("p",{className:"custom-font text-center"+("light"===this.props.theme?" text-dark":" text-white"),style:{marginBottom:"10px"}},"Charts Settings"),n.a.createElement(T,{onToggleAutoScaling:this.props.onToggleAutoScaling,onToggleAnimations:this.props.onToggleAnimations}))))))}}]),a}(n.a.Component),M=function(e){return e/1e3},I=function(e){return e/1e6},F=function(e){return 1e3*e},G=function(e){return e/1e3},L=function(e){return 1e6*e},B=function(e){return 1e3*e},W=function(e){return 9*e/5+32},z=function(e){return e+273.15},_=(a(164),a(165),Promise);if("undefined"===typeof _&&(_=root.Promise),void 0===_)throw"Promise is not supported! Use latest version node/browser or promise-polyfill";var q=function(e){return void 0===e},H=Array.isArray,J=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},K=function(e){return"function"===typeof e},Z=function(e){return"string"===typeof e},Q=function(e){if(J(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return H(e)?!e.length:!e},X=function(e,t){if(H(e))return e.map(t);for(var a in e)e.hasOwnProperty(a)&&t(e[a])},Y={PARSE_ERROR:{code:-32700,message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},INVALID_REQUEST:{code:-32600,message:"Invalid Request. The JSON sent is not a valid Request object."},METHOD_NOT_FOUND:{code:-32601,message:"Method not found. The method does not exist / is not available."},INVALID_PARAMS:{code:-32602,message:"Invalid params. Invalid method parameter(s)."},INTERNAL_ERROR:{code:-32603,message:"Internal error. Internal JSON-RPC error."}};function $(e,t,a){this.message=t||"",this.code=e||-32e3,Boolean(a)&&(this.data=a)}$.prototype=new Error;var ee=function(){var e=this,t={},a=0,r={};function n(e,t){var a,r=(a=e,JSON.parse(JSON.stringify(a)));return t&&(J(t)&&t.hasOwnProperty("message")?r.data=t.message:Z(t)&&(r.data=t),t instanceof $&&(r={message:t.message,code:t.code},t.hasOwnProperty("data")&&(r.data=t.data))),r}function s(e){try{return function(e){return!!e.error}(e)?(s=e,void(t.hasOwnProperty(s.id)?t[s.id].reject(s.error):console.log("Unknown request",s))):function(e){return e.hasOwnProperty("result")&&e.hasOwnProperty("id")}(e)?(a=e,void(t.hasOwnProperty(a.id)?(t[a.id].resolve(a.result),delete t[a.id]):console.log("unknown request",a))):function(e){return!!e.method}(e)?function(e){if(console.log("handleRemoteRequest -- simple jrpc js"),!r.hasOwnProperty(e.method))return _.resolve({jsonrpc:"2.0",id:e.id,error:n(Y.METHOD_NOT_FOUND,{message:e.method})});try{var t;if(e.hasOwnProperty("params")){if("pass"==r[e.method].params)t=r[e.method].fn.call(r,e.params);else if(H(e.params))t=r[e.method].fn.apply(r,e.params);else if(J(e.params)){if(!(r[e.method].params instanceof Array))return _.resolve({jsonrpc:"2.0",id:e.id,error:n(Y.INVALID_PARAMS,"Undeclared arguments of the method "+e.method)});var a=[];if(r[e.method].params.forEach((function(t){e.params.hasOwnProperty(t)?(a.push(e.params[t]),delete e.params[t]):a.push(void 0)})),Object.keys(e.params).length>0)return _.resolve({jsonrpc:"2.0",id:e.id,error:n(Y.INVALID_PARAMS,{message:"Params: "+Object.keys(e.params).toString()+" not used"})});t=r[e.method].fn.apply(r,a)}}else t=r[e.method].fn();return e.hasOwnProperty("id")?(s=t)&&"function"===typeof s.then?t.then((function(t){return q(t)&&(t=!0),{jsonrpc:"2.0",id:e.id,result:t}})).catch((function(t){return{jsonrpc:"2.0",id:e.id,error:n(Y.INTERNAL_ERROR,t)}})):(q(t)&&(t=!0),_.resolve({jsonrpc:"2.0",id:e.id,result:t})):_.resolve()}catch(i){return _.resolve({jsonrpc:"2.0",id:e.id,error:n(Y.INTERNAL_ERROR,i)})}var s}(e):_.resolve({id:null,jsonrpc:"2.0",error:n(Y.INVALID_REQUEST)})}catch(i){return console.error("Resolver error:"+i.message,i),_.reject(i)}var a,s}function i(e,t){var a={jsonrpc:"2.0",method:e,params:t};return J(t)&&!Q(t)&&(a.params=t),a}function l(e,r){var n={jsonrpc:"2.0",method:e,id:a+=1};return J(r)&&!Q(r)&&(n.params=r),{promise:new _((function(e,r){t[a.toString()]={resolve:e,reject:r}})),message:n}}e.toStream=function(e){console.log("Need define the toStream method before use"),console.log(arguments)},e.dispatch=function(e,t,a){if(Z(e)&&"pass"==t&&K(a))r[e]={fn:a,params:t};else if(Z(e)&&H(t)&&K(a))r[e]={fn:a,params:t};else{if(!(Z(e)&&K(t)&&q(a)))throw new Error("Missing required argument: functionName - string, paramsNameFn - string or function");r[e]={fn:t,params:null}}},e.on=e.dispatch,e.off=function(e){delete r[e]},e.call=function(t,a){var r=l(t,a);return e.toStream(JSON.stringify(r.message)),r.promise},e.notification=function(t,a){e.toStream(JSON.stringify(i(t,a)))},e.batch=function(t){var a=[],r=[];return X(t,(function(e){if(e.hasOwnProperty("call")){var t=l(e.call.method,e.call.params);r.push(t.message),a.push(t.promise.then((function(e){return e}),(function(e){return e})))}else e.hasOwnProperty("notification")&&r.push(i(e.notification.method,e.notification.params))})),e.toStream(JSON.stringify(r)),_.all(a)},e.messageHandler=function(t){try{return function(t){var a=[];return H(t)?X(t,(function(e){a.push(s(e))})):J(t)&&a.push(s(t)),_.all(a).then((function(t){var a=[];return X(t,(function(e){q(e)||a.push(e)})),1===a.length?e.toStream(JSON.stringify(a[0])):a.length>1&&e.toStream(JSON.stringify(a)),t}))}(JSON.parse(t))}catch(a){return console.log("Error in messageHandler(): ",a),e.toStream(JSON.stringify({id:null,jsonrpc:"2.0",error:Y.PARSE_ERROR})),_.reject(a)}},e.customException=function(e,t,a){return new $(e,t,a)}},te={};te.simple_jsonrpc=ee,te.WebSocket=WebSocket;var ae=function(e,t,a,r){var n=new te.simple_jsonrpc,s=new te.WebSocket("ws://"+e);function i(e,t){var a=this;return new Promise((function(r,s){n.call(e,t).then((function(e){e.success?r(e):s(e.error)})).catch((function(e){a.OnServerError(e)}))}))}this.OnServerError=console.log,this.OnSocketOpen=t||console.log,this.OnSocketClose=a||console.log,this.OnSocketError=r||console.log,n.toStream=function(e){s.send(e)},s.onopen=function(e){this.OnSocketOpen(e)}.bind(this),s.onclose=function(e){this.OnSocketClose(e)}.bind(this),s.onerror=function(e){this.OnSocketError(e)}.bind(this),s.onmessage=function(e){n.messageHandler(e.data)},this.GetAppVersion=function(){return i.call(this,"GetAppVersion")},this.EnumCommPorts=function(e){return i.call(this,"EnumCommPorts",[e])},this.GetCommPortInfo=function(e){return i.call(this,"GetCommPortInfo",[e])},this.StartComm=function(e){return i.call(this,"StartComm",[e])},this.StopComm=function(){return i.call(this,"StopComm")},this.IsCommPortOpen=function(){return i.call(this,"IsCommPortOpen")},this.IsBoardDetected=function(){return i.call(this,"IsBoardDetected")},this.GetDetectedBoardInfo=function(){return i.call(this,"GetDetectedBoardInfo")},this.GetConfigParamU8=function(e){return i.call(this,"GetConfigParamU8",[e])},this.GetConfigParamULEB=function(e){return i.call(this,"GetConfigParamULEB",[e])},this.GetConfigParamString=function(e,t){return i.call(this,"GetConfigParamString",[e,t])},this.ReadIntVariable=function(e,t){return i.call(this,"ReadIntVariable",[e,t])},this.ReadUIntVariable=function(e,t){return i.call(this,"ReadUIntVariable",[e,t])},this.ReadFloatVariable=function(e){return i.call(this,"ReadFloatVariable",[e])},this.ReadDoubleVariable=function(e){return i.call(this,"ReadDoubleVariable",[e])},this.WriteIntVariable=function(e,t,a){return i.call(this,"WriteIntVariable",[e,t,a])},this.WriteUIntVariable=function(e,t,a){return i.call(this,"WriteUIntVariable",[e,t,a])},this.WriteFloatVariable=function(e,t){return i.call(this,"WriteFloatVariable",[e,t])},this.WriteDoubleVariable=function(e,t){return i.call(this,"WriteDoubleVariable",[e,t])},this.ReadIntArray=function(e,t,a){return i.call(this,"ReadIntArray",[e,t,a])},this.ReadUIntArray=function(e,t,a){return i.call(this,"ReadUIntArray",[e,t,a])},this.ReadFloatArray=function(e,t){return i.call(this,"ReadFloatArray",[e,t])},this.ReadDoubleArray=function(e,t){return i.call(this,"ReadDoubleArray",[e,t])},this.WriteIntArray=function(e,t,a){return i.call(this,"WriteIntArray",[e,t,a])},this.WriteUIntArray=function(e,t,a){return i.call(this,"WriteUIntArray",[e,t,a])},this.WriteFloatArray=function(e,t){return i.call(this,"WriteFloatArray",[e,t])},this.WriteDoubleArray=function(e,t){return i.call(this,"WriteDoubleArray",[e,t])},this.ReadELF=function(e){return i.call(this,"ReadELF",[e])},this.ReadTSA=function(){return i.call(this,"ReadTSA")},this.EnumSymbols=function(e){return i.call(this,"EnumSymbols",[e])},this.GetSymbolInfo=function(e){return i.call(this,"GetSymbolInfo",[e])},this.EnumVariables=function(e){return i.call(this,"EnumVariables",[e])},this.GetVariableInfo=function(e){return i.call(this,"GetVariableInfo",[e])},this.DefineVariable=function(e){return i.call(this,"DefineVariable",[e])},this.DeleteVariable=function(e){return i.call(this,"DeleteVariable",[e])},this.DeleteAllScriptVariables=function(){return i.call(this,"DeleteAllScriptVariables")},this.ReadVariable=function(e){return i.call(this,"ReadVariable",[e])},this.WriteVariable=function(e,t){return i.call(this,"WriteVariable",[e,t])},this.SetupOscilloscope=function(e,t){return i.call(this,"SetupOscilloscope",[e,t])},this.GetOscilloscopeData=function(e){return i.call(this,"GetOscilloscopeData",[e])},this.GetRecorderLimits=function(e){return i.call(this,"GetRecorderLimits",[e])},this.SetupRecorder=function(e,t,a,r){return i.call(this,"SetupRecorder",[e,t,a,r])},this.StartRecorder=function(e){return i.call(this,"StartRecorder",[e])},this.StopRecorder=function(e){return i.call(this,"StopRecorder",[e])},this.GetRecorderStatus=function(e){return i.call(this,"GetRecorderStatus",[e])},this.GetRecorderData=function(e){return i.call(this,"GetRecorderData",[e])},this.PipeOpen=function(e,t,a){return i.call(this,"PipeOpen",[e,t,a])},this.PipeClose=function(e){return i.call(this,"PipeClose",[e])},this.PipeFlush=function(e,t){return i.call(this,"PipeFlush",[e,t])},this.PipeSetDefaultRxMode=function(e,t){return i.call(this,"PipeSetDefaultRxMode",[e,t])},this.PipeSetDefaultStringMode=function(e){return i.call(this,"PipeSetDefaultStringMode",[e])},this.PipeGetRxBytes=function(e){return i.call(this,"PipeGetRxBytes",[e])},this.PipeGetTxBytes=function(e){return i.call(this,"PipeGetTxBytes",[e])},this.PipeGetTxFree=function(e){return i.call(this,"PipeGetTxFree",[e])},this.PipeGetRxBufferSize=function(e){return i.call(this,"PipeGetRxBufferSize",[e])},this.PipeGetTxBufferSize=function(e){return i.call(this,"PipeGetTxBufferSize",[e])},this.PipeWriteString=function(e,t,a,r){return i.call(this,"PipeWriteString",[e,t,a,r])},this.PipeWriteIntArray=function(e,t,a,r){return i.call(this,"PipeWriteIntArray",[e,t,a,r])},this.PipeWriteUIntArray=function(e,t,a,r){return i.call(this,"PipeWriteUIntArray",[e,t,a,r])},this.PipeWriteFloatArray=function(e,t,a){return i.call(this,"PipeWriteFloatArray",[e,t,a])},this.PipeWriteDoubleArray=function(e,t,a){return i.call(this,"PipeWriteDoubleArray",[e,t,a])},this.PipeReadString=function(e,t,a,r,n){return i.call(this,"PipeReadString",[e,t,a,r,n])},this.PipeReadIntArray=function(e,t,a,r,n){return i.call(this,"PipeReadIntArray",[e,t,a,r,n])},this.PipeReadUIntArray=function(e,t,a,r,n){return i.call(this,"PipeReadUIntArray",[e,t,a,r,n])},this.PipeReadFloatArray=function(e,t,a,r){return i.call(this,"PipeReadFloatArray",[e,t,a,r])},this.PipeReadDoubleArray=function(e,t,a,r){return i.call(this,"PipeReadDoubleArray",[e,t,a,r])},this.LocalFileOpen=function(e,t){return i.call(this,"LocalFileOpen",[e,t])},this.LocalFileClose=function(e){return i.call(this,"LocalFileClose",[e])},this.LocalFileReadString=function(e,t,a){return i.call(this,"LocalFileReadString",[e,t,a])},this.LocalFileWriteString=function(e,t,a,r){return i.call(this,"LocalFileWriteString",[e,t,a,r])},this.LogEnable=function(e,t){return i.call(this,"LogEnable",[e,t])},this.LogDisable=function(){return i.call(this,"LogDisable")},this.LogSetPattern=function(e){return i.call(this,"LogSetPattern",[e])},this.LogSetVerbosity=function(e){return i.call(this,"LogSetVerbosity",[e])},this.LogSetServices=function(e,t){return i.call(this,"LogSetServices",[e,t])},this.EnableExtraFeatures=function(e){var t=this;if(e)this.OnBoardDetected||(this.OnBoardDetected=function(){console.log("FreeMASTER Event received: OnBoardDetected()")}),this.OnCommPortStateChanged||(this.OnCommPortStateChanged=function(e){console.log("FreeMASTER Event received: OnCommPortStateChanged("+e+")")}),this.OnVariableChanged||(this.OnVariableChanged=function(e,t,a){console.log('FreeMASTER Event received: OnVariableChanged("'+e+'", '+t+", "+a+")")}),this.OnRecorderDone||(this.OnRecorderDone=function(){console.log("FreeMASTER Event received: OnRecorderDone()")}),n.dispatch("OnBoardDetected","pass",(function(e){return t.OnBoardDetected.apply(null,e)})),n.dispatch("OnCommPortStateChanged","pass",(function(e){return t.OnCommPortStateChanged.apply(null,e)})),n.dispatch("OnVariableChanged","pass",(function(e){return t.OnVariableChanged.apply(null,e)})),n.dispatch("OnRecorderDone","pass",(function(e){return t.OnRecorderDone.apply(null,e)})),this.StartStopComm=function(e){return i.call(this,"StartStopComm",[e])},this.EnableEvents=function(e){return i.call(this,"EnableEvents",[e])},this.SubscribeVariable=function(e,t){return i.call(this,"SubscribeVariable",[e,t])},this.UnSubscribeVariable=function(e){return i.call(this,"UnSubscribeVariable",[e])},this.DefineSymbol=function(e,t,a,r){return i.call(this,"DefineSymbol",[e,t,a,r])},this.GetSymbolInfo=function(e){return i.call(this,"GetSymbolInfo",[e])},this.GetStructMemberInfo=function(e,t){return i.call(this,"GetStructMemberInfo",[e,t])},this.DeleteAllScriptSymbols=function(){return i.call(this,"DeleteAllScriptSymbols")},this.RunStimulators=function(e){return i.call(this,"RunStimulators",[e])},this.StopStimulators=function(e){return i.call(this,"StopStimulators",[e])},this.Exit=function(){return i.call(this,"Exit")},this.ActivateWindow=function(){return i.call(this,"ActivateWindow")},this.SelectItem=function(e,t){return i.call(this,"SelectItem",[e,t])},this.OpenProject=function(e){return i.call(this,"OpenProject",[e])},this.IsBoardWithActiveContent=function(){return i.call(this,"IsBoardWithActiveContent")},this.EnumHrefLinks=function(e){return i.call(this,"EnumHrefLinks",[e])},this.EnumProjectFiles=function(e){return i.call(this,"EnumProjectFiles",[e])},this.SetPageReloadOnPortOpen=function(e){return i.call(this,"SetPageReloadOnPortOpen",[e])},this.GetPageReloadOnPortOpen=function(){return i.call(this,"GetPageReloadOnPortOpen")},this.PipeSetDefaultTxMode=function(e){return i.call(this,"PipeSetDefaultTxMode",[e])},this.GetAddressInfo=function(e,t){return i.call(this,"GetAddressInfo",[e,t])},this.DefineOscilloscope=function(e,t){return i.call(this,"DefineOscilloscope",[e,t])},this.DefineRecorder=function(e,t){return i.call(this,"DefineRecorder",[e,t])},this.SendCommand=function(e,t){return i.call(this,"SendCommand",[e,t])},this.GetCurrentRecorderState=function(){return i.call(this,"GetCurrentRecorderState")},this.GetCurrentRecorderData=function(){return i.call(this,"GetCurrentRecorderData")},this.GetCurrentRecorderSeries=function(e){return i.call(this,"GetCurrentRecorderSeries",[e])};else if(this.EnableEvents)throw"Can't disable ExtraFeatures after enabled once"}},re=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={pcm:null,boardConnected:!1,demoModeActive:!1,loading:!1,freemasterVersion:"desktop",elfPath:"Managed from Desktop Application",liteConnection:{liteServerUrl:"localhost:41000",connString:"Managed from Desktop Application"},labels:[],packVoltage:[],packCurrent:[],packTemperature:[],packSoC:[],cellsNumber:6,cellsData:[],units:{systemSocUnits:"%",systemVoltageUnits:"V",systemCurrentUnits:"A",systemTempUnits:"\xb0C",systemPowerUnits:"W",axis:{voltage:{"\xb5V":{min:0,max:5e6},mV:{min:0,max:5e3},V:{min:0,max:5}},current:{"\xb5A":{min:-2e6,max:2e6},mA:{min:-2e3,max:2e3},A:{min:-2,max:2}},temp:{"\xb0C":{min:-40,max:80},"\xb0F":{min:-40,max:180},K:{min:230,max:355}}}},graphSettings:{graphAutoscaling:!0,graphAnimations:!0,maxOnGraphDataPoints:10},theme:"dark"},r.passedSeconds=0,r.updateRate=1e3,r.maxSavedGraphDataPoints=120,r.variables={name:{PackVoltage:"PackVoltage",PackCurrent:"PackCurrent",PackTemp:"InternalTemperature",PackSoC:"PackSOC",CellVoltage:"CellVoltage",CellCurrent:"CellCurrent",CellTemp:"CellTemp",CellSOC:"CellSOC"},type:{PackVoltage:{type:"float",size:4},PackCurrent:{type:"float",size:4},PackTemp:{type:"float",size:4},PackSoC:{type:"float",size:4},CellVoltage:{type:"float",size:4},CellCurrent:{type:"float",size:4},CellTemp:{type:"float",size:4},CellSOC:{type:"float",size:4}}},r.numberOfCellVariables=4,r.cellsPackButton=n.a.createRef(),r.onClickConnect=r.onClickConnect.bind(Object(u.a)(r)),r.onClickDisconnect=r.onClickDisconnect.bind(Object(u.a)(r)),r.defineVariables=r.defineVariables.bind(Object(u.a)(r)),r.readVariables=r.readVariables.bind(Object(u.a)(r)),r.readDEMOvars=r.readDEMOvars.bind(Object(u.a)(r)),r.defineDEMOVars=r.defineDEMOVars.bind(Object(u.a)(r)),r.changeUnit=r.changeUnit.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"changeUnit",value:function(e){"uV"===e?this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemVoltageUnits:"\xb5"+e.charAt(1)})}})):"mV"===e||"V"===e?this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemVoltageUnits:e})}})):"uA"===e?this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemCurrentUnits:"\xb5"+e.charAt(1)})}})):"mA"===e||"A"===e?this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemCurrentUnits:e})}})):"C"===e||"F"===e?this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemTempUnits:"\xb0"+e})}})):"K"===e&&this.setState((function(t){return{units:Object(l.a)(Object(l.a)({},t.units),{},{systemTempUnits:e})}}))}},{key:"defineVariables",value:function(e){var t=this.state.pcm,a=this.variables.name.PackVoltage,r=this.variables.name.PackCurrent,n=this.variables.name.PackTemp,s=this.variables.name.PackSoC,i=this.variables.name.CellVoltage,o=this.variables.name.CellCurrent,c=this.variables.name.CellTemp,u=this.variables.name.CellSOC,m=[];this.cellsData=[],this.labels=[],this.packVoltage=[],this.packCurrent=[],this.packTemperature=[],this.packSoC=[],m.push.apply(m,[t.DefineVariable(Object(l.a)({name:a,addr:a},this.variables.type.PackVoltage)),t.DefineVariable(Object(l.a)({name:r,addr:r},this.variables.type.PackCurrent)),t.DefineVariable(Object(l.a)({name:n,addr:n},this.variables.type.PackTemp)),t.DefineVariable(Object(l.a)({name:s,addr:s},this.variables.type.PackSoC))]);for(var h=0;h<e;h++)this.cellsData.push({labels:[],voltage:[],current:[],temp:[],soc:[]}),m.push.apply(m,[t.DefineVariable(Object(l.a)({name:i+"[".concat(h,"]"),addr:i+"[".concat(h,"]")},this.variables.type.CellVoltage)),t.DefineVariable(Object(l.a)({name:o+"[".concat(h,"]"),addr:o+"[".concat(h,"]")},this.variables.type.CellCurrent)),t.DefineVariable(Object(l.a)({name:c+"[".concat(h,"]"),addr:c+"[".concat(h,"]")},this.variables.type.CellTemp)),t.DefineVariable(Object(l.a)({name:u+"[".concat(h,"]"),addr:u+"[".concat(h,"]")},this.variables.type.CellSOC))]);return Promise.all(m)}},{key:"readVariables",value:function(){var e=this,t=this.state.pcm,a=this.variables.name.PackVoltage,r=this.variables.name.PackCurrent,n=this.variables.name.PackTemp,s=this.variables.name.PackSoC,i=this.variables.name.CellVoltage,l=this.variables.name.CellCurrent,o=this.variables.name.CellTemp,c=this.variables.name.CellSOC,u=[];u.push.apply(u,[t.ReadVariable(a),t.ReadVariable(r),t.ReadVariable(n),t.ReadVariable(s)]);for(var m=0;m<this.state.cellsNumber;m++)u.push.apply(u,[t.ReadVariable(i+"[".concat(m,"]")),t.ReadVariable(l+"[".concat(m,"]")),t.ReadVariable(o+"[".concat(m,"]")),t.ReadVariable(c+"[".concat(m,"]"))]);Promise.all(u).then((function(t){for(var a=t.slice(4).map((function(e){return e.data})),r=0;r<a.length;r+=e.numberOfCellVariables){var n=e.cellsData[r/e.numberOfCellVariables].labels,s=e.cellsData[r/e.numberOfCellVariables].voltage,i=e.cellsData[r/e.numberOfCellVariables].current,l=e.cellsData[r/e.numberOfCellVariables].temp,o=e.cellsData[r/e.numberOfCellVariables].soc;switch(n.push(e.passedSeconds),e.state.units.systemVoltageUnits){case"\xb5V":s.push(L(a[r]));break;case"mV":s.push(B(a[r]));break;case"V":s.push(a[r])}switch(e.state.units.systemCurrentUnits){case"\xb5A":i.push(L(a[r+1]));break;case"mA":i.push(B(a[r+1]));break;case"A":i.push(a[r+1])}switch(e.state.units.systemTempUnits){case"\xb0C":l.push(a[r+2]);break;case"\xb0F":l.push(W(a[r+2]));break;case"K":l.push(z(a[r+2]))}o.push(a[r+3]),s.length>e.maxSavedGraphDataPoints&&(n.splice(0,n.length-e.maxSavedGraphDataPoints),s.splice(0,s.length-e.maxSavedGraphDataPoints),i.splice(0,i.length-e.maxSavedGraphDataPoints),l.splice(0,l.length-e.maxSavedGraphDataPoints),o.splice(0,o.length-e.maxSavedGraphDataPoints))}switch(e.state.units.systemVoltageUnits){case"\xb5V":e.packVoltage.push(L(t[0].data));break;case"mV":e.packVoltage.push(B(t[0].data));break;case"V":e.packVoltage.push(t[0].data)}switch(e.state.units.systemCurrentUnits){case"\xb5A":e.packCurrent.push(L(t[1].data));break;case"mA":e.packCurrent.push(B(t[1].data));break;case"A":e.packCurrent.push(t[1].data)}switch(e.state.units.systemTempUnits){case"\xb0C":e.packTemperature.push(t[2].data);break;case"\xb0F":e.packTemperature.push(W(t[2].data));break;case"K":e.packTemperature.push(z(t[2].data))}e.packSoC.push(t[3].data),e.labels.push(e.passedSeconds),e.packVoltage.length>e.maxSavedGraphDataPoints&&(e.packVoltage.splice(0,e.packVoltage.length-e.maxSavedGraphDataPoints),e.packCurrent.splice(0,e.packCurrent.length-e.maxSavedGraphDataPoints),e.packTemperature.splice(0,e.packTemperature.length-e.maxSavedGraphDataPoints),e.packSoC.splice(0,e.packSoC.length-e.maxSavedGraphDataPoints),e.labels.splice(0,e.labels.length-e.maxSavedGraphDataPoints)),e.setState((function(){return{labels:e.labels,packVoltage:e.packVoltage,packCurrent:e.packCurrent,packTemperature:e.packTemperature,packSoC:e.packSoC,cellsData:e.cellsData}})),e.passedSeconds++,e.readVarsTimeout=setTimeout(e.readVariables,e.updateRate)})).catch((function(t){console.log(t),p.b.error(" Reading the variables failed."),clearTimeout(e.readVarsTimeout)}))}},{key:"defineDEMOVars",value:function(e){this.cellsData=[];for(var t=0;t<e;t++)this.cellsData.push({labels:[],voltage:[],current:[],temp:[],soc:[]})}},{key:"readDEMOvars",value:function(){for(var e=this,t=0;t<this.state.cellsNumber;t++){var a={cellVoltage:1e6*(5*Math.random()+0),cellCurrent:1e3*(4*Math.random()-2),cellTemp:110*Math.random()-40,cellSOC:Math.floor(100*Math.random()+0)};switch(this.state.units.systemVoltageUnits){case"\xb5V":a.cellVoltage=a.cellVoltage;break;case"mV":a.cellVoltage=M(a.cellVoltage);break;case"V":a.cellVoltage=I(a.cellVoltage)}switch(this.state.units.systemCurrentUnits){case"\xb5A":a.cellCurrent=F(a.cellCurrent);break;case"mA":a.cellCurrent=a.cellCurrent;break;case"A":a.cellCurrent=G(a.cellCurrent)}switch(this.state.units.systemTempUnits){case"\xb0C":a.cellTemp=a.cellTemp;break;case"\xb0F":a.cellTemp=W(a.cellTemp);break;case"K":a.cellTemp=z(a.cellTemp)}this.cellsData[t].labels.push(this.passedSeconds),this.cellsData[t].voltage.push(a.cellVoltage),this.cellsData[t].current.push(a.cellCurrent),this.cellsData[t].temp.push(a.cellTemp),this.cellsData[t].soc.push(a.cellSOC),this.cellsData[t].labels.length>this.maxSavedGraphDataPoints&&(this.cellsData[t].labels.splice(0,this.cellsData[t].labels.length-this.maxSavedGraphDataPoints),this.cellsData[t].voltage.splice(0,this.cellsData[t].voltage.length-this.maxSavedGraphDataPoints),this.cellsData[t].current.splice(0,this.cellsData[t].current.length-this.maxSavedGraphDataPoints),this.cellsData[t].temp.splice(0,this.cellsData[t].temp.length-this.maxSavedGraphDataPoints),this.cellsData[t].soc.splice(0,this.cellsData[t].soc.length-this.maxSavedGraphDataPoints))}switch(this.state.units.systemVoltageUnits){case"\xb5V":this.packVoltage.push(1e6*(5*Math.random()+0));break;case"mV":this.packVoltage.push(M(1e6*(5*Math.random()+0)));break;case"V":this.packVoltage.push(I(1e6*(5*Math.random()+0)))}switch(this.state.units.systemCurrentUnits){case"\xb5A":this.packCurrent.push(F(1e3*(4*Math.random()-2)));break;case"mA":this.packCurrent.push(1e3*(4*Math.random()-2));break;case"A":this.packCurrent.push(G(1e3*(4*Math.random()-2)))}switch(this.state.units.systemTempUnits){case"\xb0C":this.packTemperature.push(110*Math.random()-40);break;case"\xb0F":this.packTemperature.push(W(110*Math.random()-40));break;case"K":this.packTemperature.push(z(110*Math.random()-40))}this.packSoC.push(Math.random()),this.labels.push(this.passedSeconds),this.packVoltage.length>this.maxSavedGraphDataPoints&&(this.packVoltage.splice(0,this.packVoltage.length-this.maxSavedGraphDataPoints),this.packCurrent.splice(0,this.packCurrent.length-this.maxSavedGraphDataPoints),this.packTemperature.splice(0,this.packTemperature.length-this.maxSavedGraphDataPoints),this.packSoC.splice(0,this.packSoC.length-this.maxSavedGraphDataPoints),this.labels.splice(0,this.labels.length-this.maxSavedGraphDataPoints)),this.setState((function(){return{labels:e.labels,packVoltage:e.packVoltage,packCurrent:e.packCurrent,packTemperature:e.packTemperature,packSoC:e.packSoC,cellsData:e.cellsData}})),this.passedSeconds++,this.readDEMOVarsTimeout=setTimeout(this.readDEMOvars,this.updateRate)}},{key:"onClickDisconnect",value:function(){var e=this;this.state.pcm.StopComm().then((function(){p.b.success(" Disconnected."),clearTimeout(e.readVarsTimeout),e.setState((function(){return{boardConnected:!1,pcm:null}}))})).catch((function(){p.b.error(" Stopping the communication failed.")}))}},{key:"onClickConnect",value:function(e){var t=this;if(!this.state.loading)if(this.state.demoModeActive)p.b.error(" Disable demo mode before connecting to the board.");else{var a=e.liteServer||this.state.liteConnection.liteServerUrl,r=e.connString||this.state.liteConnection.connString;this.state.pcm=new ae(a,(function(){var e=t.state.pcm;if("desktop"===t.state.freemasterVersion){p.b.success(" Successfully connected."),t.passedSeconds=0,t.labels=[],t.cellsData=[],t.packVoltage=[],t.packCurrent=[],t.packTemperature=[],t.packSoC=[];for(var a=0;a<t.state.cellsNumber;a++)t.cellsData.push({labels:[],voltage:[],current:[],temp:[],soc:[]});t.readVariables(),t.setState((function(){return{boardConnected:!0,loading:!1}}))}else e.StartComm(r).then(e.IsBoardDetected).then((function(t){if(!0===t.data)return e.GetDetectedBoardInfo();throw new Error("Board not detected!")})).then((function(a){return e.ReadELF(t.state.elfPath)})).then((function(){p.b.success(" Successfully connected."),t.defineVariables(t.state.cellsNumber).then((function(){t.passedSeconds=0,t.readVariables(),t.setState((function(){return{boardConnected:!0,loading:!1}}))}))})).catch((function(e){console.log(e),p.b.error(" An error has occurred, check the connection parameters."),t.setState((function(){return{loading:!1}}))}))}),(function(){p.b.error(" Connection Closed."),clearTimeout(t.readVarsTimeout),t.setState((function(){return{boardConnected:!1,loading:!1}}))}),(function(){p.b.error(" An error has occurred, check the connection."),clearTimeout(t.readVarsTimeout),t.setState((function(){return{boardConnected:!1,loading:!1}}))})),this.setState((function(){return{loading:!0}}))}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.readVarsTimeout),clearTimeout(this.readDEMOVarsTimeout)}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"content-area"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{id:"main-container",className:"mt-3"},n.a.createElement("div",{id:"header-container",className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"row"},n.a.createElement("h2",{className:"ml-3"},"Battery Management System ",this.state.demoModeActive?"(Demo mode active)":"")),n.a.createElement("div",{className:"row"},n.a.createElement(f,{text:"Dashboard",active:"true",controls:"#dashboard-container",icon:"fa fa-sliders",disabled:!1}),n.a.createElement(f,{buttonRef:this.cellsPackButton,text:"Cells Pack",controls:"#cell-pack-container",icon:"fa fa-list",disabled:!1}),n.a.createElement(f,{text:"Raw Data",controls:"#raw-data-container",icon:"fa fa-table",disabled:!1}),n.a.createElement(f,{text:"System Configuration",controls:"#chemistry-container",icon:"fa fa-flask",disabled:!1}),n.a.createElement("a",{className:"btn btn-large white-text-button btn-primary",style:{position:"absolute",right:"15px"},role:"button",onClick:this.state.boardConnected?this.onClickDisconnect:this.onClickConnect},!1===this.state.boardConnected&&!0===this.state.loading&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"spinner-grow mr-2",style:{width:"1.4rem",height:"1.4rem"},role:"status","aria-hidden":"true"}),"Connecting"),!0===this.state.boardConnected&&!1===this.state.loading&&n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fa fa-exchange mr-2",style:{width:"1.4rem",height:"1.4rem"}}),"Disconnect"),!1===this.state.boardConnected&&!1===this.state.loading&&n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fa fa-exchange mr-2",style:{width:"1.4rem",height:"1.4rem"}}),"Connect"))))),n.a.createElement(d,{active:"true",id:"dashboard-container",dataParent:"#main-container"},n.a.createElement(S,{cellsNumber:this.state.cellsNumber,data:{labels:this.state.labels,packVoltage:this.state.packVoltage,packCurrent:this.state.packCurrent,packTemperature:this.state.packTemperature,packSoC:this.state.packSoC},clickCellsPackTab:function(){e.cellsPackButton.current.click()},boardConnected:this.state.boardConnected,units:this.state.units,theme:this.state.theme,graphSettings:this.state.graphSettings})),n.a.createElement(d,{id:"cell-pack-container",dataParent:"#main-container"},n.a.createElement(V,{cellsNumber:this.state.cellsNumber,cellsData:this.state.cellsData,passedSeconds:this.passedSeconds,numberOfCellVariables:this.numberOfCellVariables,units:this.state.units,theme:this.state.theme,graphSettings:this.state.graphSettings})),n.a.createElement(d,{id:"raw-data-container",dataParent:"#main-container"},n.a.createElement(R,{cellsNumber:this.state.cellsNumber,cellsData:this.state.cellsData,units:this.state.units,theme:this.state.theme})),n.a.createElement(d,{id:"chemistry-container",dataParent:"#main-container"},n.a.createElement(U,{boardConnected:this.state.boardConnected,demoModeActive:this.state.demoModeActive,liteConnection:this.state.liteConnection,changeLiteConnection:function(t){e.setState((function(){return{liteConnection:{liteServerUrl:t.liteServerUrl||e.state.liteConnection.liteServerUrl,connString:t.connString||e.state.liteConnection.connString}}}))},onSelectedFreemasterVersion:function(t){e.setState((function(){return{freemasterVersion:t}}))},elfPath:this.state.elfPath,changeElfPath:function(t){e.setState((function(){return{elfPath:t}}))},onToggleAutoScaling:function(){e.setState((function(e){return{graphSettings:Object(l.a)(Object(l.a)({},e.graphSettings),{},{graphAutoscaling:!e.graphSettings.graphAutoscaling})}}))},onToggleAnimations:function(){e.setState((function(e){return{graphSettings:Object(l.a)(Object(l.a)({},e.graphSettings),{},{graphAnimations:!e.graphSettings.graphAnimations})}}))},onChangeMaxOnGraphDataPoints:function(t){e.setState((function(e){return{graphSettings:Object(l.a)(Object(l.a)({},e.graphSettings),{},{maxOnGraphDataPoints:t})}}))},changeCellsNumber:function(t){p.b.info(" Cells number changed to "+t,{autoClose:3e3}),e.state.pcm?e.defineVariables(t).then((function(){e.setState((function(){return{cellsNumber:t}}))})):(e.defineDEMOVars(t),e.setState((function(){return{cellsNumber:t}})))},cellsNumber:this.state.cellsNumber,cellsData:this.state.cellsData,data:{labels:this.state.labels,packVoltage:this.state.packVoltage,packCurrent:this.state.packCurrent,packTemperature:this.state.packTemperature,packSoC:this.state.packSoC},triggerDemoMode:function(){e.labels=[],e.cellsData=[],e.packVoltage=[],e.packCurrent=[],e.packTemperature=[],e.packSoC=[],e.passedSeconds=0,!1===e.state.demoModeActive?(e.defineDEMOVars(e.state.cellsNumber),e.readDEMOvars(),p.b.info(" Demo mode switched ON.",{autoClose:3e3})):(clearTimeout(e.readDEMOVarsTimeout),p.b.info(" Demo mode switched OFF.",{autoClose:3e3})),e.setState((function(e){return{demoModeActive:!e.demoModeActive}}))},changeUnit:this.changeUnit,units:this.state.units,theme:this.state.theme,changeApplicationTheme:function(t){e.setState((function(){return{theme:t}}))}})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12 mt-3 text-center"},"\xa9 2020 NXP"))),n.a.createElement(p.a,null))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,t,a){},57:function(e,t,a){e.exports=a(166)},62:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.26d26994.chunk.js.map